{"filter":false,"title":"log-final.rb","tooltip":"/log-final.rb","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":67,"column":3},"action":"insert","lines":["require 'net/smtp'","files = Dir[\"C:/Sites/clearcaselog/Logs/*.txt\"]","files.each do |file_name|","    puts file_name","if !File.directory? file_name","data = []","count=0   ","$val=0","$name=file_name","File.foreach(file_name) do |line|","    ","#####################","if line.upcase.include? \"ERROR\"","    $val=10 ","    #puts \"Passed\"","    #puts $val","end","#####################","    ","    ","line.chomp!","temp_line = line.delete(' ')","if temp_line =~ /TotalCopiedSkippedMismatchFAILEDExtras/","count=count+1","else","if ((count > 0) & (count <= 3))","count+=1","line = line.split('  ')","line.delete(\"\")","data.push [line[5].strip.to_i]","end","end","end","data = data.flatten","#puts data","if data.max > 0 ||  $val > 0","    $val=0","puts \"Send Alert!!\"","","######################################","","message = <<MESSAGE_END","From: <selvaganapathi.m@hcl.com>","To: <HCL_AGILENT_SETOOLS_CLSLLS_SUPPORT@hcl.com>","MIME-Version: 1.0","Content-type: text/html","Subject: Attention","","<p>Hi Team,</p>","<p>The VOB backup from localdisk to LUN got failed. Please check the below log files and take the action.","</p> "," <p><b>Regards,</b></p>","  CC Admin","","MESSAGE_END","","Net::SMTP.start('germany.smtp.agilent.com') do |smtp|","  smtp.send_message message,'selvaganapathi.m@hcl.com','thiyagu.p@hcl.com'                        #'selvaganapathi.m@hcl.com','HCL_AGILENT_SETOOLS_CLSLLS_SUPPORT@h#cl.com'                       ","end","","##########################################","","else","puts \"Do Nothing\"","puts $val","end","end","end"],"id":1}]]},"ace":{"folds":[],"scrolltop":598.5,"scrollleft":0,"selection":{"start":{"row":56,"column":50},"end":{"row":56,"column":50},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":41,"state":["heredoc","MESSAGE_END"],"mode":"ace/mode/ruby"}},"timestamp":1475663222275,"hash":"c4d15422b7b883ac403ce8f60533502b56e1ed63"}